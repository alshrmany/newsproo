{% extends 'news/home.html' %}
{% load static %}

{% block content %}
  <div class="contact-container">
    <!-- رأس الصفحة -->
    <header class="contact-header">
      <h1>اتصل بنا</h1>
      <p>نحن هنا لمساعدتك والإجابة على استفساراتك. تواصل معنا عبر القنوات المتاحة below</p>
    </header>

    <!-- عرض رسائل Django -->
    {% if messages %}
      <div class="container mt-3">
        {% for message in messages %}
          <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <div class="row">
      <!-- العمود الأيسر -->
      <div class="col-lg-8">
        <!-- بطاقة تواصل -->
        <div class="contact-card">
          <h3><i class="fas fa-envelope me-2"></i>أرسل رسالة</h3>

          <!-- تغيير بسيط: إضافة method وaction وcsrf_token -->
          <form method="post" id="contactForm">
            {% csrf_token %}
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="name" class="form-label">الاسم الكامل</label>
                  <input type="text" class="form-control" id="name" name="name" required />
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="email" class="form-label">البريد الإلكتروني</label>
                  <input type="email" class="form-control" id="email" name="email" required />
                </div>
              </div>
            </div>

            <div class="form-group">
              <label for="subject" class="form-label">الموضوع</label>
              <input type="text" class="form-control" id="subject" name="subject" required />
            </div>

            <div class="form-group">
              <label for="message" class="form-label">الرسالة</label>
              <textarea class="form-control" id="message" name="message" required></textarea>
            </div>

            <button type="submit" class="btn btn-primary"><i class="fas fa-paper-plane me-2"></i>إرسال الرسالة</button>
          </form>
        </div>

        <!-- خريطة -->
        <div class="map-container">
          <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3620.294002999667!2d46.672822275995!3d24.854860877935!2m3!1f0!2f0!3f0!3m2!1i1020!2i768!4f13.1!3m3!1m2!1s0x3e2ee3df5c8b3d91%3A0x5c2b1ac42c1f4c!2sRiyadh%2C%20Saudi%20Arabia!5e0!3m2!1sen!2s!4v1690212345678!5m2!1sen!2s" allowfullscreen="" loading="lazy"></iframe>
        </div>
      </div>

      <!-- العمود الأيمن -->
      <div class="col-lg-4">
        <!-- معلومات الاتصال -->
        <div class="contact-card">
          <h3><i class="fas fa-info-circle me-2"></i>معلومات الاتصال</h3>

          <div class="contact-info">
            <div class="contact-item">
              <div class="contact-icon">
                <i class="fas fa-map-marker-alt"></i>
              </div>
              <h4>العنوان</h4>
              <p>الرياض، المملكة العربية السعودية</p>
            </div>

            <div class="contact-item">
              <div class="contact-icon">
                <i class="fas fa-phone"></i>
              </div>
              <h4>الهاتف</h4>
              <p>+966 11 123 4567</p>
            </div>

            <div class="contact-item">
              <div class="contact-icon">
                <i class="fas fa-envelope"></i>
              </div>
              <h4>البريد الإلكتروني</h4>
              <p>info@newssite.com</p>
            </div>

            <div class="contact-item">
              <div class="contact-icon">
                <i class="fas fa-clock"></i>
              </div>
              <h4>ساعات العمل</h4>
              <p>الأحد - الخميس: 8 ص - 4 م</p>
            </div>
          </div>

          <div class="social-links">
            <a href="#" title="فيسبوك"><i class="fab fa-facebook-f"></i></a>
            <a href="#" title="تويتر"><i class="fab fa-twitter"></i></a>
            <a href="#" title="إنستغرام"><i class="fab fa-instagram"></i></a>
            <a href="#" title="يوتيوب"><i class="fab fa-youtube"></i></a>
          </div>
        </div>

        <!-- الأسئلة الشائعة -->
        <div class="contact-card">
          <h3><i class="fas fa-question-circle me-2"></i>أسئلة شائعة</h3>

          <div class="accordion" id="faqAccordion">
            <div class="accordion-item">
              <h2 class="accordion-header"><button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">كيف يمكنني نشر مقال على الموقع؟</button></h2>
              <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                <div class="accordion-body">يمكنك نشر مقال عن طريق التسجيل في الموقع ثم الدخول إلى لوحة التحكم والنقر على "مقال جديد" وملء النموذج المعروض.</div>
              </div>
            </div>

            <div class="accordion-item">
              <h2 class="accordion-header"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">هل يمكنني تعديل مقال بعد نشره؟</button></h2>
              <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                <div class="accordion-body">نعم، يمكنك تعديل المقالات الخاصة بك من خلال لوحة التحكم في أي وقت قبل الموافقة عليها من قبل الإدارة.</div>
              </div>
            </div>

            <div class="accordion-item">
              <h2 class="accordion-header"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">كيف يمكنني استعادة كلمة المرور؟</button></h2>
              <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                <div class="accordion-body">يمكنك النقر على "نسيت كلمة المرور" في صفحة تسجيل الدخول وإدخال بريدك الإلكتروني لاستلام رابط إعادة التعيين.</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ربط ملفات JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // معالجة نموذج الاتصال - تم التعليق عليه لأن Django سيتعامل معه
    /*
            document.getElementById('contactForm').addEventListener('submit', function (e) {
                e.preventDefault()

                // هنا يمكنك إضافة كود إرسال النموذج
                alert('شكراً لك على رسالتك! سنرد عليك في أقرب وقت ممكن.')
                this.reset()
            })
            */

    // إضافة تأثيرات للعناصر
    const contactItems = document.querySelectorAll('.contact-item')
    contactItems.forEach((item) => {
      item.addEventListener('mouseenter', function () {
        this.style.transform = 'translateY(-5px)'
      })

      item.addEventListener('mouseleave', function () {
        this.style.transform = 'translateY(0)'
      })
    })
  </script>
{% endblock %}
